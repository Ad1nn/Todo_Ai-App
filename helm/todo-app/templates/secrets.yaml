{{/*
=============================================================================
secrets.yaml - Kubernetes Secret for sensitive data
=============================================================================

LEARNING NOTES:
- Secrets store sensitive data (passwords, API keys, certificates)
- Data is base64 encoded (NOT encrypted by default!)
- In production, use:
  - Sealed Secrets (encrypted at rest)
  - External Secrets Operator (fetch from Vault, AWS, etc.)
  - SOPS (encrypted YAML files)
- Mount as environment variables or files in pods

=============================================================================
*/}}

apiVersion: v1
kind: Secret
metadata:
  name: {{ include "todo-app.fullname" . }}-secrets
  labels:
    {{- include "todo-app.labels" . | nindent 4 }}
type: Opaque
# stringData allows plain text (Kubernetes base64 encodes it)
# Use 'data' for pre-encoded values
stringData:
  {{- if .Values.secrets.databaseUrl }}
  DATABASE_URL: {{ .Values.secrets.databaseUrl | quote }}
  {{- end }}
  {{- if .Values.secrets.jwtSecret }}
  JWT_SECRET: {{ .Values.secrets.jwtSecret | quote }}
  {{- end }}
  {{- if .Values.secrets.openaiApiKey }}
  OPENAI_API_KEY: {{ .Values.secrets.openaiApiKey | quote }}
  {{- end }}
